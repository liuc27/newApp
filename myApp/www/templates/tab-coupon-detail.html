<!DOCTYPE html>

<ion-view title="{{coupon.name}}">
  <ion-content has-header="true" padding="true">
    <div class="list card pink">

      <div class="item item-avatar">
        <div class="productName">剩余{{coupon.numbers}}</div>
        <div class="productDate alignLeft">{{coupon.timeLimit|date:'至yyyy年MM月dd日'}}</div>
        <div class="addToCart">
          <button ng-class="favorites" ng-if="coupon.numbers>0" ng-init="favoriteClass()" ng-click="changeClass()" ng-disabled="{{isDisabled}}">{{favoritesText}}</button>
          <button ng-class="favorites" ng-if="coupon.numbers<=0">没有剩余</button>
        </div>

      </div>

      <div class="item item-body">
        <img class="full-image" src="{{coupon.image}}">
        <p font>
          {{coupon.productDetail}}
        </p>
        <p>
          <a href="#" class="subdued font">1 顶</a>
          <a href="#" class="subdued font">{{commentLength(coupon.comment)}}评价</a>
        </p>
      </div>

      <div class="item tabs tabs-secondary tabs-icon-left">
        <a class="tab-item" href="#">
          <i class="icon ion-thumbsup"></i>
          顶
        </a>
        <a class="tab-item" ng-click="showComment=!showComment">
          <i class="icon ion-chatbox"></i>
          评价
        </a>
      </div>
        <div ng-show="showComment">
            <input class="comment" type="text" ng-model="comment.comment">
            <button ng-click="submitComment()">提交</button>
        </div>
      <div ng-repeat = "xxx in comment | orderBy : '-date'">
        <div>{{xxx.title}}</div>
        <div>{{xxx.date|date:'yyyy年MM月dd日HH时mm分'}}</div>
      </div>

    </div>
  </ion-content>
</ion-view>
